<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Audio Flip Feature</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .test-steps {
            margin-left: 20px;
        }
        .test-steps li {
            margin-bottom: 10px;
        }
        button {
            padding: 10px 15px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
        }
        button:hover {
            background-color: #45a049;
        }
        .success {
            color: green;
            font-weight: bold;
        }
        .error {
            color: red;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>Audio Flip Feature Test</h1>

    <div class="test-section">
        <h2>Test 1: Basic Functionality</h2>
        <div class="test-steps">
            <ol>
                <li>Open the main application in your browser</li>
                <li>Open the settings modal (click ‚ò∞ hamburger menu)</li>
                <li>Enable the "Play audio after card flipping" checkbox</li>
                <li>Close the modal</li>
                <li>Start a review session with a deck that has audio</li>
                <li>Flip a card (click or press Space)</li>
                <li>Verify that audio plays automatically after flipping</li>
            </ol>
        </div>
        <button onclick="markTest1Pass()">‚úì Pass</button>
        <button onclick="markTest1Fail()">‚úó Fail</button>
        <div id="test1-result"></div>
    </div>

    <div class="test-section">
        <h2>Test 2: Cards Without Audio</h2>
        <div class="test-steps">
            <ol>
                <li>Enable the "Play audio after card flipping" setting</li>
                <li>Find or create a card without audio (or use a deck without audio)</li>
                <li>Flip the card</li>
                <li>Verify that no error occurs and the app continues to work normally</li>
            </ol>
        </div>
        <button onclick="markTest2Pass()">‚úì Pass</button>
        <button onclick="markTest2Fail()">‚úó Fail</button>
        <div id="test2-result"></div>
    </div>

    <div class="test-section">
        <h2>Test 3: Setting Persistence</h2>
        <div class="test-steps">
            <ol>
                <li>Enable the "Play audio after card flipping" setting</li>
                <li>Refresh the page</li>
                <li>Open the settings modal</li>
                <li>Verify that the checkbox is still enabled</li>
                <li>Disable the setting and refresh again</li>
                <li>Verify that the checkbox is now disabled</li>
            </ol>
        </div>
        <button onclick="markTest3Pass()">‚úì Pass</button>
        <button onclick="markTest3Fail()">‚úó Fail</button>
        <div id="test3-result"></div>
    </div>

    <div class="test-section">
        <h2>Test 4: Interaction with Existing Features</h2>
        <div class="test-steps">
            <ol>
                <li>Enable the "Play audio after card flipping" setting</li>
                <li>Flip a card and let audio play automatically</li>
                <li>While audio is playing, try using the Down arrow key</li>
                <li>Verify that audio doesn't overlap (AudioPlayer prevents this)</li>
                <li>Try clicking the speaker button manually</li>
                <li>Verify that manual play still works</li>
            </ol>
        </div>
        <button onclick="markTest4Pass()">‚úì Pass</button>
        <button onclick="markTest4Fail()">‚úó Fail</button>
        <div id="test4-result"></div>
    </div>

    <div class="test-section">
        <h2>Test 5: Different Learning Modes</h2>
        <div class="test-steps">
            <ol>
                <li>Enable the "Play audio after card flipping" setting</li>
                <li>Test in all 4 learning modes:</li>
                <ul>
                    <li>Hanzi First</li>
                    <li>Listening (should not interfere with auto-play)</li>
                    <li>Meaning to Chinese</li>
                    <li>Pronunciation</li>
                </ul>
                <li>Verify that audio plays correctly in each mode when flipping</li>
            </ol>
        </div>
        <button onclick="markTest5Pass()">‚úì Pass</button>
        <button onclick="markTest5Fail()">‚úó Fail</button>
        <div id="test5-result"></div>
    </div>

    <div class="test-section">
        <h2>Test 6: Visual Feedback</h2>
        <div class="test-steps">
            <ol>
                <li>Enable the "Play audio after card flipping" setting</li>
                <li>Flip a card with audio</li>
                <li>Verify that the speaker button shows visual feedback (turns blue/playing state)</li>
                <li>Verify that the audio plays without requiring manual click</li>
            </ol>
        </div>
        <button onclick="markTest6Pass()">‚úì Pass</button>
        <button onclick="markTest6Fail()">‚úó Fail</button>
        <div id="test6-result"></div>
    </div>

    <div class="test-section">
        <h2>Overall Test Results</h2>
        <div id="summary">
            <p>Tests passed: <span id="pass-count">0</span>/6</p>
            <p>Tests failed: <span id="fail-count">0</span>/6</p>
            <p id="final-result"></p>
        </div>
    </div>

    <script>
        let passCount = 0;
        let failCount = 0;

        function markTest1Pass() {
            document.getElementById('test1-result').innerHTML = '<span class="success">‚úì Test 1 Passed</span>';
            passCount++;
            updateSummary();
        }

        function markTest1Fail() {
            document.getElementById('test1-result').innerHTML = '<span class="error">‚úó Test 1 Failed</span>';
            failCount++;
            updateSummary();
        }

        function markTest2Pass() {
            document.getElementById('test2-result').innerHTML = '<span class="success">‚úì Test 2 Passed</span>';
            passCount++;
            updateSummary();
        }

        function markTest2Fail() {
            document.getElementById('test2-result').innerHTML = '<span class="error">‚úó Test 2 Failed</span>';
            failCount++;
            updateSummary();
        }

        function markTest3Pass() {
            document.getElementById('test3-result').innerHTML = '<span class="success">‚úì Test 3 Passed</span>';
            passCount++;
            updateSummary();
        }

        function markTest3Fail() {
            document.getElementById('test3-result').innerHTML = '<span class="error">‚úó Test 3 Failed</span>';
            failCount++;
            updateSummary();
        }

        function markTest4Pass() {
            document.getElementById('test4-result').innerHTML = '<span class="success">‚úì Test 4 Passed</span>';
            passCount++;
            updateSummary();
        }

        function markTest4Fail() {
            document.getElementById('test4-result').innerHTML = '<span class="error">‚úó Test 4 Failed</span>';
            failCount++;
            updateSummary();
        }

        function markTest5Pass() {
            document.getElementById('test5-result').innerHTML = '<span class="success">‚úì Test 5 Passed</span>';
            passCount++;
            updateSummary();
        }

        function markTest5Fail() {
            document.getElementById('test5-result').innerHTML = '<span class="error">‚úó Test 5 Failed</span>';
            failCount++;
            updateSummary();
        }

        function markTest6Pass() {
            document.getElementById('test6-result').innerHTML = '<span class="success">‚úì Test 6 Passed</span>';
            passCount++;
            updateSummary();
        }

        function markTest6Fail() {
            document.getElementById('test6-result').innerHTML = '<span class="error">‚úó Test 6 Failed</span>';
            failCount++;
            updateSummary();
        }

        function updateSummary() {
            document.getElementById('pass-count').textContent = passCount;
            document.getElementById('fail-count').textContent = failCount;

            if (passCount === 6) {
                document.getElementById('final-result').innerHTML = '<span class="success">üéâ All tests passed! Feature is working correctly.</span>';
            } else if (failCount > 0) {
                document.getElementById('final-result').innerHTML = '<span class="error">‚ö†Ô∏è Some tests failed. Please review the implementation.</span>';
            } else {
                document.getElementById('final-result').textContent = 'Testing in progress...';
            }
        }
    </script>
</body>
</html>