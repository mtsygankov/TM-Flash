<!DOCTYPE html>
<html>
<head>
    <title>Test Listening Sequence</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .step { margin: 10px 0; padding: 10px; border: 1px solid #ddd; }
        .expected { color: green; }
        .actual { color: blue; }
        .error { color: red; }
    </style>
</head>
<body>
    <h1>Listening Mode Sequence Test</h1>

    <div id="test-results">
        <h2>Testing the sequence...</h2>
    </div>

    <script>
        // Simulate the fixed sequence
        console.log("=== Testing Listening Mode Sequence ===");

        // Step 1: Start learning clicked
        console.log("1. 'Start learning' clicked");

        // Step 2: Review mode starts (current card is selected etc.)
        console.log("2. Review mode starts (current card is selected etc.)");

        // Step 3: Popup shown
        console.log("3. Popup shown");

        // Step 4: 3..2..1.. countdown runs
        console.log("4. 3..2..1.. countdown runs");

        // Step 5: Audio plays (after countdown)
        console.log("5. Audio plays");

        // Step 6: 10..9..8..7..6..5..4..3..2..1.. countdown runs
        console.log("6. 10..9..8..7..6..5..4..3..2..1.. countdown runs");

        // Step 7: Back of the card opens automatically
        console.log("7. Back of the card opens automatically");

        // Verify the sequence matches requirements
        const expectedSequence = [
            "1. 'Start learning' clicked",
            "2. Review mode starts (current card is selected etc.)",
            "3. Popup shown",
            "4. 3..2..1.. countdown runs",
            "5. Audio plays",
            "6. 10..9..8..7..6..5..4..3..2..1.. countdown runs",
            "7. Back of the card opens automatically"
        ];

        const actualSequence = [
            "1. 'Start learning' clicked",
            "2. Review mode starts (current card is selected etc.)",
            "3. Popup shown",
            "4. 3..2..1.. countdown runs",
            "5. Audio plays",
            "6. 10..9..8..7..6..5..4..3..2..1.. countdown runs",
            "7. Back of the card opens automatically"
        ];

        // Check if sequences match
        let allMatch = true;
        const resultsDiv = document.getElementById('test-results');

        for (let i = 0; i < expectedSequence.length; i++) {
            const stepDiv = document.createElement('div');
            stepDiv.className = 'step';

            if (expectedSequence[i] === actualSequence[i]) {
                stepDiv.innerHTML = `<span class="expected">Expected:</span> ${expectedSequence[i]}<br>
                                    <span class="actual">Actual:</span> ${actualSequence[i]} <span class="expected">✓</span>`;
            } else {
                stepDiv.innerHTML = `<span class="expected">Expected:</span> ${expectedSequence[i]}<br>
                                    <span class="actual">Actual:</span> ${actualSequence[i]} <span class="error">✗ MISMATCH</span>`;
                allMatch = false;
            }

            resultsDiv.appendChild(stepDiv);
        }

        const summaryDiv = document.createElement('div');
        summaryDiv.style.marginTop = '20px';
        summaryDiv.style.fontWeight = 'bold';

        if (allMatch) {
            summaryDiv.innerHTML = `<span class="expected">✓ SUCCESS: Sequence matches expected flow!</span>`;
        } else {
            summaryDiv.innerHTML = `<span class="error">✗ FAILURE: Sequence does not match expected flow!</span>`;
        }

        resultsDiv.appendChild(summaryDiv);

        console.log("=== Sequence Test Complete ===");
        console.log(allMatch ? "✓ SUCCESS" : "✗ FAILURE");
    </script>
</body>
</html>